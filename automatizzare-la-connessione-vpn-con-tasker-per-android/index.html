<!DOCTYPE html><html lang="it"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Automatizzare la connessione VPN con Tasker per Android - Gabriele Tips</title><meta name="description" content="Da quando ho iniziato ad usare le VPN sul telefono mi sono accorto di un problema di semplice natura: ricordarmi di attivarla quando esco di&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="stylesheet" href="https://gabriele.tips/media/plugins/syntaxHighlighter/prism-black.css"><link rel="stylesheet" href="https://gabriele.tips/media/plugins/syntaxHighlighter/prism-inline-color.css"><script async defer="defer" type="text/javascript" src="https://eu.umami.is/script.js" data-website-id="5b1efb7d-c74c-4bb3-80c6-5ca666f8bd10" data-auto-track="true" data-do-not-track="false" data-cache="false" data-host-url="gabriele.tips"></script><link rel="canonical" href="https://gabriele.tips/automatizzare-la-connessione-vpn-con-tasker-per-android/"><link rel="alternate" type="application/atom+xml" href="https://gabriele.tips/feed.xml"><link rel="alternate" type="application/json" href="https://gabriele.tips/feed.json"><meta property="og:title" content="Automatizzare la connessione VPN con Tasker per Android"><meta property="og:site_name" content="Gabriele Tips"><meta property="og:description" content="Da quando ho iniziato ad usare le VPN sul telefono mi sono accorto di un problema di semplice natura: ricordarmi di attivarla quando esco di&hellip;"><meta property="og:url" content="https://gabriele.tips/automatizzare-la-connessione-vpn-con-tasker-per-android/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://gabriele.tips/media/website/favicon.ico" type="image/x-icon"><link rel="preload" href="https://gabriele.tips/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://gabriele.tips/assets/css/style.css?v=9c0f93417398e01e3c99419944d45d0d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://gabriele.tips/automatizzare-la-connessione-vpn-con-tasker-per-android/"},"headline":"Automatizzare la connessione VPN con Tasker per Android","datePublished":"2018-11-25T18:19","dateModified":"2023-08-08T16:08","description":"Da quando ho iniziato ad usare le VPN sul telefono mi sono accorto di un problema di semplice natura: ricordarmi di attivarla quando esco di&hellip;","author":{"@type":"Person","name":"Gabriele","url":"https://gabriele.tips/authors/gabriele/"},"publisher":{"@type":"Organization","name":"Gabriele"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><style>.fi{fill:none;stroke-linecap:round;stroke-linejoin:round;vertical-align:middle}</style></head><body><div class="container container--center"><header class="header"><div class="header__logo"><a class="logo" href="https://gabriele.tips/">Gabriele Tips</a></div><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://gabriele.tips/privacy-policy/" target="_self">privacy policy</a></li><li><a href="https://gabriele.tips/whoami/" target="_self">whoami</a></li></ul></nav></header><main class="content"><article class="post"><header><h1 class="post__title">Automatizzare la connessione VPN con Tasker per Android</h1><div class="post__meta"><time datetime="2018-11-25T18:19" class="post__date">25 novembre 2018</time></div></header><div class="post__entry"><p>Da quando ho iniziato ad usare le VPN sul telefono mi sono accorto di un problema di semplice natura: ricordarmi di attivarla quando esco di casa. Spesse volte mi è capitato infatti di ricordarmene solo dopo qualche ora passata fuori casa, o ancora peggio accorgermi della mancanza di un filtro sulla navigazione quando ormai avevo già vinto 4 iPad e 9 iPhone X.</p><p>L'idea mi è quindi balzata in testa: perché non automatizzare la connessione VPN appena mi allontano dal WiFi di casa? Viceversa, appena torno a casa la VPN si deve disconnettere.</p><p>Ebbene, grazie a Tasker e il client OpenVPN for Android è possibile farlo!</p><p>Questa breve guida fa seguito alla mia guida iniziale su <a href="https://gabriele.tips/virtual-private-pi-holed-network/">come realizzare una VPN domestica con Pi-Hole integrato</a> da poter utilizzare fuori casa per navigare sicuri e protetti in mobilità.</p><h2 id="tasker-per-android">Tasker per Android</h2><p>Tasker è un'app per Android che permette di eseguire delle automazioni in base a determinate condizioni. La trovate nel <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">Play Store</a> ad un costo di 2.99 €.</p><p>Il principio di funzionamento di Tasker è molto semplice:</p><p><strong>SE</strong> [CONDIZIONE DA RISPETTARE] <strong>È VERO, ALLORA</strong> [ESEGUI ATTIVITÀ]</p><p>In Tasker le "condizioni da rispettare" si chiamano <strong>Profili</strong>. Ogni <strong>Attività</strong> può contenere una o più <strong>Azioni</strong>.</p><h2 id="automatic-virtual-private-pi-holed-network">AUTOMATIC Virtual Private Pi-Holed Network</h2><p>La logica con cui ho creato l'automazione è la seguente:</p><ul><li><strong>SE</strong> [WiFi non connesso] <strong>È VERO, ALLORA</strong> [Connetti VPN]</li><li><strong>SE</strong> [WiFi di casa connesso] <strong>È VERO, ALLORA</strong> [Disconnetti VPN]</li></ul><p>La realizzazione è abbastanza semplice, vediamola insieme.</p><h2 id="creiamo-le-attivit-start-vpn-e-stop-vpn">Creiamo le attività "Start VPN" e "Stop VPN"</h2><p>Iniziamo con la creazione delle due attività di connessione e disconnessione della VPN.</p><h3 id="start-vpn">Start VPN</h3><p>Apriamo Tasker e posizioniamoci sulla tab <strong>Attività</strong>, dopodiché premiamo <strong>+</strong>, scriviamo <strong>"Start VPN"</strong> e poi confermiamo.</p><p>A questo punto possiamo andare ad inserire una o più azioni che verranno eseguite quando verrà avviata questa attività, noi dobbiamo connettere il nostro profilo VPN salvato in OpenVPN for Android.</p><p>Per farlo, premiamo <strong>+</strong> e scegliamo <strong>Sistema</strong> e <strong>Invia Intent</strong>. Vi apparirà un form dove bisogna inserire dei valori. I valori da inserire sono questi:</p><p>Azione<br><code>android.intent.action.MAIN<br></code>Cat<br><code>None<br></code>Extra (dove "Casa" è il nome del vostro profilo VPN)<br><code>de.blinkt.openvpn.shortcutProfileName: Casa<br></code>Pacchetto<br><code>de.blinkt.openvpn<br></code>Classe<br><code>de.blinkt.openvpn.LauchVPN<br></code>Target<br><code>Activity</code></p><p>Ora torniamo indietro fino al pannello principale delle attività.</p><h3 id="stop-vpn">Stop VPN</h3><p>Creiamo la seconda attività per disconnettere la VPN sempre seguendo la stessa procedura con <strong>+</strong>, scriviamo <strong>"Stop VPN"</strong> e confermiamo.</p><p>Di nuovo qui facciamo <strong>+</strong>, <strong>Sistema</strong>, <strong>Invia Intent</strong> e scriviamo questi parametri:</p><p>Azione<br><code>android.intent.action.MAIN<br></code>Cat<br><code>None<br></code>Extra (dove "Casa" è il nome del vostro profilo VPN)<br><code>de.blinkt.openvpn.shortcutProfileName: Casa<br></code>Pacchetto<br><code>de.blinkt.openvpn<br></code>Classe<br><code>de.blinkt.openvpn.api.DisconnectVPN<br></code>Target<br><code>Activity</code></p><p>Torniamo di nuovo indietro alla home e se avete fatto tutto giusto, dovreste ritrovarvi con due Attività: <strong>"Start VPN"</strong> e <strong>"Stop VPN"</strong>.</p><h2 id="creazione-dei-profili-wifi-collegato-e-non-wifi-collegato">Creazione dei profili "WIFI Collegato" e "Non WIFI Collegato"</h2><p>Ora possiamo passare alla creazione dei profili.</p><h3 id="wifi-collegato">WIFI Collegato</h3><p>Iniziamo con la creazione del profilo <strong>"WIFI Collegato"</strong>, dobbiamo quindi dirgli di disconnettere la VPN se siamo connessi al nostro WiFi di casa.</p><p>Spostiamoci nella tab <strong>Profili</strong>, premiamo <strong>+</strong>, selezioniamo <strong>Stato</strong> dal menu a scomparsa, poi <strong>Rete</strong> e <strong>WIFI Collegato</strong>.</p><p>Nel form che vi compare, dovete semplicemente inserire il <strong>nome della vostra rete WiFi</strong> nel campo <strong>SSID</strong> e lasciare tutto il resto invariato. Ora premendo indietro per tornare alla pagina principale vi comparirà automaticamente un menu rapido dal quale possiamo scegliere l'azione da eseguire quando si attiverà questo profilo. In questo specifico caso dovete selezionare <strong>"Stop VPN"</strong>.</p><p>Ed ecco quindi che abbiamo creato il primo profilo:</p><p><strong>SE</strong> [WiFi di casa connesso] <strong>È VERO, ALLORA</strong> [Disconnetti VPN]</p><figure class="kg-card kg-image-card"><figure class="kg-image"><img src="https://gabriele.tips/media/posts/8/Screenshot_20181125-161151-2.png" alt="" loading="lazy" sizes="(min-width: 920px) 703px, (min-width: 700px) calc(82vw - 35px), calc(100vw - 81px)" srcset="https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-161151-2-xs.png 300w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-161151-2-sm.png 480w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-161151-2-md.png 768w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-161151-2-lg.png 1024w"></figure></figure><h3 id="non-wifi-collegato">Non WIFI Collegato</h3><p>Passiamo quindi alla creazione del profilo <strong>"Non WIFI Collegato"</strong>. Dobbiamo dire che se il WiFi viene scollegato, deve connettersi automaticamente la VPN.</p><p>Procediamo quindi allo stesso modo nella tab <strong>Profili</strong>, premiamo <strong>+</strong>, selezioniamo <strong>Stato</strong> dal menu a scomparsa, poi <strong>Rete</strong> e <strong>WIFI Collegato</strong>. A questo punto dobbiamo semplicemente mettere la spunta su <strong>Inverti</strong> lasciando tutto vuoto.</p><p>Torniamo indietro e ci verrà riproposto lo stesso menu rapido di prima, dove selezioniamo <strong>"Start VPN"</strong>.</p><p>Facendo così, abbiamo creato anche il nostro secondo profilo:</p><p><strong>SE</strong> [WiFi non connesso] <strong>È VERO, ALLORA</strong> [Connetti VPN]</p><figure class="kg-card kg-image-card"><figure class="kg-image"><img src="https://gabriele.tips/media/posts/8/Screenshot_20181125-161157-2.png" alt="" loading="lazy" sizes="(min-width: 920px) 703px, (min-width: 700px) calc(82vw - 35px), calc(100vw - 81px)" srcset="https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-161157-2-xs.png 300w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-161157-2-sm.png 480w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-161157-2-md.png 768w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-161157-2-lg.png 1024w"></figure></figure><h2 id="salvataggio-della-configurazione">Salvataggio della configurazione</h2><p>Ora che abbiamo creato le azioni e i profili, non resta che salvare tutta la configurazione. Per farlo è sufficiente premere il <strong>check</strong> sulla barra del titolo e Tasker si attiverà.</p><figure class="kg-card kg-image-card"><figure class="kg-image"><img src="https://gabriele.tips/media/posts/8/Screenshot_20181125-162303.png" alt="" loading="lazy" sizes="(min-width: 920px) 703px, (min-width: 700px) calc(82vw - 35px), calc(100vw - 81px)" srcset="https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-162303-xs.png 300w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-162303-sm.png 480w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-162303-md.png 768w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-162303-lg.png 1024w"></figure></figure><h2 id="autorizzare-tasker-per-l-interazione-con-openvpn">Autorizzare Tasker per l'interazione con OpenVPN</h2><p>Alla prima esecuzione di un'attività potrebbe apparirvi un popup di richiesta autorizzazione. Questo è un avviso di sicurezza di <strong>OpenVPN per Android</strong> per indicarvi che un'applicazione di terze parti vuole interagire con i profili VPN. Qui dovete semplicemente <strong>mettere la spunta</strong> per considerare Tasker attendibile e fare <strong>Ok</strong>.</p><figure class="kg-card kg-image-card"><figure class="kg-image"><img src="https://gabriele.tips/media/posts/8/Screenshot_20181125-170252-2.png" alt="" loading="lazy" sizes="(min-width: 920px) 703px, (min-width: 700px) calc(82vw - 35px), calc(100vw - 81px)" srcset="https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-170252-2-xs.png 300w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-170252-2-sm.png 480w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-170252-2-md.png 768w, https://gabriele.tips/media/posts/8/responsive/Screenshot_20181125-170252-2-lg.png 1024w"></figure></figure><h2 id="considerazioni-finali">Considerazioni finali</h2><p>Sto utilizzando questa configurazione da circa un mesetto e posso confermarvi che il setup è abbastanza solido. So per certo però che i più attenti di voi non potranno fare a meno di notare che c'è un piccolo "bug" nella mia configurazione, che si presenta nella situazione in cui si passa dalla rete WiFi di casa direttamente ad un'altra rete WiFi. In questo specifico caso infatti il profilo "Non WIFI Collegato" non entra in azione, poiché il dispositivo migra direttamente da una rete WiFi ad un'altra, non scatenando l'evento che fa switchare il profilo.</p><p>La situazione potrebbe sembrare di facile risoluzione semplicemente inserendo il nome dell'SSID di casa insieme al parametro Inverti (SE ![SSID di Casa]), tuttavia impostando così il profilo ho riscontrato che viene attivato erroneamente nel momento in cui il telefono si connette in VPN, generando così un loop di connessione e disconnessione continua.</p><p>Ammetto di non avere indagato a fondo, tuttavia il setup così impostato è perfetto per la mia esperienza d'uso, ovvero:</p><p><strong>Sono a casa -&gt;</strong> Profilo "WiFi Collegato", navigo in rete locale.</p><p><strong>Fuori casa in 4G -&gt;</strong> Mi sgancio dal wifi, si attiva "Non WiFi Collegato" e navigo in VPN.</p><p><strong>Mi collego ad altri WiFi -&gt;</strong> La condizione per "WiFi Collegato" non viene rispettata in quanto SSID differente, quindi continuo a navigare in VPN.</p><p><strong>Torno a casa -&gt;</strong> Rileva connessione al WiFi domestico, entra "WiFi Collegato" che disconnette la VPN.</p><p>E con questo è tutto. Se avete bisogno di ulteriori informazioni, segnalarmi degli errori o fornirmi feedback, scrivetemi! ☺️</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 8 agosto 2023</p><div class="post__share"></div></footer><nav class="pagination"><div class="pagination__title"><span>Read other posts</span></div><div class="pagination__buttons"><a href="https://gabriele.tips/virtual-private-pi-holed-network/" class="btn previous" rel="prev" aria-label="[MISSING TRANSLATION]:  VPPN: Virtual Private &quot;Pi-Holed&quot; Network "><span class="btn__icon">←</span> <span class="btn__text">VPPN: Virtual Private &quot;Pi-Holed&quot; Network</span> </a><a href="https://gabriele.tips/fastweb-e-modem-libero/" class="btn next" rel="next" aria-label="[MISSING TRANSLATION]:  Fastweb FTTH e Modem Libero "><span class="btn__text">Fastweb FTTH e Modem Libero</span> <span class="btn__icon">→</span></a></div></nav></article></main><footer class="footer"><div class="footer__inner"><div class="footer__copyright"><p>Gabriele Tips ::  Powered by Publii CMS</p></div></div></footer></div><script defer="defer" src="https://gabriele.tips/assets/js/scripts.min.js?v=74fad06980c30243d91d72c7c57fcdb8"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://gabriele.tips/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://gabriele.tips/media/plugins/syntaxHighlighter/prism-line-numbers.min.js"></script><script defer="defer" src="https://gabriele.tips/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://gabriele.tips/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script><script defer="defer" src="https://gabriele.tips/media/plugins/syntaxHighlighter/prism-inline-color.min.js"></script></body></html>